<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <script>
    const rpsChoices = ["rock", "paper", "scissors"];

    let playerSelection;
    let computerSelection;
    let wins = 0;
    let losses = 0;
    let winMessage;
    let lossMessage;
    let invalidMessage = `I'm sorry but that's an invalid choice. Please choose either rock, paper, or scissors only.`;
    let tieMessage;
    let endResult;
    let quitMessage = `Well, it's been fun. I'm sorry to see you go but life is full of such sweet sorrows, aint it? Toodle-ooo!`
       
    

    function computerPlay(){
      let randomChoice = rpsChoices[Math.floor(Math.random() * 3)];
      return randomChoice;
    }

    function userPlay(){
      let userChoice = prompt("Hello. Would you like to play a game of 'Rock, Paper, Scissors'?\n\n Please choose your throw.");
      return userChoice;
    }
    
    function playerQuits(message){
      alert(message);
    } 
    
    function roundResult(result){

      let recordMessage;
      let message;
      if (result==='win'){
        wins++
        message = winMessage;
      }
      if (result === 'loss'){
        losses++
        message = lossMessage;
      } 
      if (result === 'tie'){
        tieMessage = `Hey will you look at that. You both chose ${playerSelection}. It's a draw!`;
        message = tieMessage;

      }
      recordMessage = `So far, you've won ${wins} ${wins === 1 ? 'match': 'matches' } and lost ${losses}.`;
        return `${message}.\n${recordMessage}`;
    }
    
    function playRound(player, computer){

      if (player == 'paper'){
        
        if (computer == 'paper'){
          return roundResult('tie');
        } else if (computer == 'rock'){
            return roundResult('win');
        } else {
            return roundResult('loss');
        }
      } else if (player == 'rock'){
          if (computer == 'rock'){
            return roundResult('tie');
        } else if (computer == 'scissors'){
            return roundResult('win');
        } else {
            return roundResult('loss');
        } 
      } else if (player == 'scissors'){        
          if (computer == 'scissors'){
            return roundResult('tie');
          } else if (computer == 'paper'){
              return roundResult('win');
          } else {
              return roundResult('loss');
          } 
        } 
    }
    
    function game(){
      let rounds = 0

      rspGame: do {
        //get user's throw choice
        playerSelection = userPlay();
        //CGP makes its throw
        computerSelection = computerPlay();
        
        //check if user hit cancel or a blank OK
        if (playerSelection != null || playerSelection === ''){
          playerSelection = playerSelection.toLowerCase();
        } else if (playerSelection != 'rock' &&  //check if it's a typo but also not a null or emptystring
            playerSelection != 'paper' && 
            playerSelection != 'scissors' && playerSelection != null && playerSelection != ''){
            alert(invalidMessage);
            continue
        } else {
            playerQuits(quitMessage)
            break
        }

      
      
      //generate messages with newly made player choices
      winMessage = `Congrats! ${playerSelection} beats ${computerSelection} so you've won!`;
      lossMessage = `Oooof! The computer chose ${computerSelection} and unfortunately ${computerSelection} beats ${playerSelection}... aaaand you've lost.`;

    //check who won    
    
    rounds++
    console.log(playRound(playerSelection, computerSelection));
    }while(rounds < 5)

    }
    
    game();

  //   let ranNumber;
    
  //   for (let i = 0; i < 200; i++){
  //   ranNumber = Math.floor(Math.random() * 3);
  //   console.log(ranNumber);
  
  // }
  </script>
</body>
</html>