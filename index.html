<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <script>
    let playerSelection;
    let computerSelection;
    let wins = 0;
    let losses = 0;
    let winMessage;
    let lossMessage;
    let invalidMessage = `I'm sorry but that's an invalid choice. Please choose either rock, paper, or scissors only.`;
    let tieMessage = "Hey will you look at that. You both chose the same thing. It's a draw!";
    
    
    const rpsChoices = ["rock", "paper", "scissors"];

    function computerPlay(){
      let randomChoice = rpsChoices[Math.floor(Math.random() * 3)];
      // console.log(`the computer has chosen ${computerChoice}, while you chose ${playerSelection}`);
      return randomChoice;
    }

    function userPlay(){
      let userChoice = prompt("Hello. Would you like to play a game of 'Rock, Paper, Scissors'?\n\n Please choose your throw.");
      return userChoice;
    }

    function roundResult(result){
      let recordMessage;
      if (result==='win'){
        wins++
        console.log(winMessage);
      }
      if (result === 'loss'){
        losses++
        console.log(lossMessage);
      } 
      if (result === 'tie'){
        console.log(tieMessage);
      }
      recordMessage = `So far, you've won ${wins} ${wins === 1 ? 'match': 'matches' } and lost ${losses}.`;
      console.log(recordMessage);
    }
    
    function playRound(player, computer){
      if (player == 'paper'){
        
        if (computer == 'paper'){
          roundResult('tie');
        } else if (computer == 'rock'){
          roundResult('win');
        } else {
          roundResult('loss');
        }
      } else if (player == 'rock'){
          if (computer == 'rock'){
          roundResult('tie');
        } else if (computer == 'scissors'){
          roundResult('win');
        } else {
          roundResult('loss');
        } 
      } else if (player == 'scissors'){        
          if (computer == 'scissors'){
            roundResult('tie');
          } else if (computer == 'paper'){
            roundResult('win');
          } else {
            roundResult('loss');
          } 
        } 
    }
    
    rspGame: do {
      //get user's throw choice
       playerSelection = userPlay();
      
      //check if user hit cancel or a blank OK
      if (playerSelection != null || playerSelection === ''){
        playerSelection = playerSelection.toLowerCase();
      } 

      //check if it's a typo but also not a null or emptystring
      if (playerSelection != 'rock' && 
      playerSelection != 'paper' && 
      playerSelection != 'scissors' && playerSelection != null && playerSelection != ''){
        alert(invalidMessage);
        continue
      }

      //CGP makes its throw
      computerSelection = computerPlay();
      
      //generate messages with newly made player choices
      winMessage = `Congrats! ${playerSelection} beats ${computerSelection} so you've won!`;
      lossMessage = `Oooof! The computer chose ${computerSelection} and unfortunately ${computerSelection} beats ${playerSelection}... aaaand you've lost.`;

    //check who won    
    playRound(playerSelection, computerSelection);
  }while(playerSelection)
  
  alert("Welp, it's been fun and I'm sorry to see you go but life is full of such sweet sorrows. Toodle-ooo!");
  //   let ranNumber;
    
  //   for (let i = 0; i < 200; i++){
  //   ranNumber = Math.floor(Math.random() * 3);
  //   console.log(ranNumber);
  
  // }
  </script>
</body>
</html>